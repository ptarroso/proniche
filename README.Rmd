---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r settings, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%",
  eval = TRUE,
  echo = TRUE,
  include = TRUE
)
```

# proniche: PRresence-Only NICHE modelling

R package for computing niche models using a variety of **truly presence-only methods** (i.e., methods that use only environmental info from the presence sites, with no background or pseudo-absence data):

- Bioclim (rectangular environmental envelope)
- Convex hull (in environmental space)
- Domain
- Mahalanobis distance
- Kernel
- Multivariate normal distribution


## Usage

```{r usage}
# devtools::install_github("https://github.com/ptarroso/proniche")
library(proniche)

tmp <- terra::rast(c("GIS/wc2.0_bio_5m_01.tif", "GIS/wc2.0_bio_5m_06.tif"))
prc <- terra::rast(c("GIS/wc2.0_bio_5m_12.tif", "GIS/wc2.0_bio_5m_14.tif"))
vars <- c(tmp, prc)
terra::plot(vars)

chilus <- read.table("GIS/chilus.csv", sep=";", header=TRUE)
vals <- terra::extract(vars, chilus, ID=FALSE)
terra::plot(vars[[1]] * 0, col = "grey", legend = FALSE, main = "presences")
points(chilus, pch = 20, cex = 0.2)

bc <- model(vals, vars, method = "bioclim")
ch <- model(vals, vars, method = "convexhull")
dm <- model(vals, vars, method = "domain")
mm <- model(vals, vars, method = "mahalanobis")
km <- model(vals, vars, method = "kernel")
mv <- model(vals, vars, method = "mvnormal")

par(mfrow = c(2, 3))
terra::plot(bc[[1]], main="Bioclim")
terra::plot(ch[[1]], main="Convex Hull")
terra::plot(dm[[1]], main="Domain")
terra::plot(mm[[1]], main="Mahalanobis")
terra::plot(km[[1]], main="Kernel")
terra::plot(mv[[1]], main="Multivariate Normal")
```


## TO DO

- ~~Add multivariate normal distribution~~
- ~~Maybe add resampling to Mahalanobis (needs to estimate covariance)~~
- ~~Create an R package~~
- Add ~~documentation and~~ references to original model publications
- Maybe some accessory functions to clean data set? (Remove duplicates, NAs, etc)
- ~~Instead of receiving coordinates as input, perhaps modelling functions should get already the environmental values at presences?~~ 
- function to plot models representation in environmental space?
